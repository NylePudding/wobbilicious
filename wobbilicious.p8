pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
tmhs = {}
speed = 2

function _init()
	poke(0x5f2c,3)
	
	--setup treadmills
	add_tmh(8,8,"d")
	add_tmh(8,16,"d")
	add_tmh(8,24,"d")
	add_tmh(8,32,"d")
	add_tmh(8,40,"d")
	add_tmh(8,48,"r")
	add_tmh(16,48,"r")
	add_tmh(24,48,"r")
	add_tmh(32,48,"r")
	add_tmh(40,48,"r")
	add_tmh(48,48,"u")
	add_tmh(48,40,"u")
	add_tmh(48,32,"u")
	add_tmh(48,24,"u")
	add_tmh(48,16,"u")
	add_tmh(48,8,"l")
	add_tmh(40,8,"l")
	add_tmh(32,8,"l")
	add_tmh(24,8,"l")
	add_tmh(16,8,"l")
	
	
	
end

function _update()
	cls()
end

function _draw()
	draw_tm()
end

function draw_tm()
	for i=1,#tmhs,1 do
		local tm = tmhs[i]
		if (time() % 0.5 == 0.1) then
			tm.a+=1
			if tm.a > 4 then
				tm.a = 1
			end
		end
		spr(tm.f[tm.a],tm.x,tm.y)
	end
end


function add_tmh(x,y,d)
	local tm = {}
	tm.x=x
	tm.y=y
	tm.d=d
	tm.a=1
	if d=="r" then
		tm.f={6,5,4,3}
	elseif d=="l" then
		tm.f={3,4,5,6}
	elseif d=="d" then
		tm.f={19,20,21,22}
	elseif d=="u" then
		tm.f={22,21,20,19}
	end
	tmhs[#tmhs+1]=tm
end
__gfx__
000000000000000000000000111d111d11d111d11d111d11d111d111000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000011d111d11d111d11d111d111111d111d000000000000000000000000000000000000000000000000000000000000000000000000
007007000000000000000000111d111d11d111d11d111d11d111d111000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000011d111d11d111d11d111d111111d111d000000000000000000000000000000000000000000000000000000000000000000000000
000770000000000000000000111d111d11d111d11d111d11d111d111000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000777777011d111d11d111d11d111d111111d111d000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000077777777111d111d11d111d11d111d11d111d111000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000777777011d111d11d111d11d111d111111d111d000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000d1d1d1d111111111111111111d1d1d1d000000000000000000666600000000000000000000000000000000000000000000000000
0000000000000000077777701d1d1d1dd1d1d1d11111111111111111000000000000000006222260000000000000000000000000000000000000000000000000
000000000000000077777777111111111d1d1d1dd1d1d1d111111111000000000000000006888860000000000000000000000000000000000000000000000000
00000000000000006777777611111111111111111d1d1d1dd1d1d1d1000000000000000006888860000000000000000000000000000000000000000000000000
000000000000000076666667d1d1d1d111111111111111111d1d1d1d000000000000000006688660000000000000000000000000000000000000000000000000
0000000000000000677777761d1d1d1dd1d1d1d11111111111111111000000000000000000666600000000000000000000000000000000000000000000000000
000000000000000076666667111111111d1d1d1dd1d1d1d111111111000000000000000000066000000000000000000000000000000000000000000000000000
00000000000000000777777011111111111111111d1d1d1dd1d1d1d1000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000088000000aa000000cc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000088880000aaaa0000cccc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000088880000aaaa0000cccc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000788887007aaaa7007cccc700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000007788887777aaaa7777cccc770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000777777007777770077777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000009900000033000000220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000099990000333300002222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000099990000333300002222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000799997007333370072222700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000007799997777333377772222770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000777777007777770077777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
